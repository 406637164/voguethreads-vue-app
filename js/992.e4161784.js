"use strict";(self["webpackChunke_commerce_front"]=self["webpackChunke_commerce_front"]||[]).push([[992],{7992:function(e,t,o){o.r(t),o.d(t,{default:function(){return R}});var a=o(3396),l=o(7139);const s={class:"w-50 container p-3",style:{"margin-top":"100px"}},r={class:"tabs d-flex"},n=(0,a._)("b",null,"登入",-1),i=[n];function c(e,t,o,n,c,m){const d=(0,a.up)("Navbar");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{cartTotal:c.cartTotal},null,8,["cartTotal"]),(0,a._)("div",s,[(0,a._)("div",r,[(0,a._)("div",{class:(0,l.C_)(["tab-item",{active:"login"===c.activeTab}]),href:"#",onClick:t[0]||(t[0]=e=>c.activeTab="login")},i,2),(0,a._)("div",{class:(0,l.C_)(["tab-item",{active:"register"===c.activeTab}]),href:"#",onClick:t[1]||(t[1]=e=>c.activeTab="register")}," 註冊 ",2)]),((0,a.wg)(),(0,a.j4)((0,a.LL)("login"===c.activeTab?"LoginForm":"RegisterForm")))])],64)}var m=o(9242);const d={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},u=(0,a._)("label",{class:"form-label",for:"loginName"},"姓名",-1),p={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},g=(0,a._)("label",{class:"form-label",for:"loginemail"},"帳號(電子郵件)",-1),f={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},h=(0,a._)("label",{class:"form-label",for:"loginPassword"},"密碼",-1),b={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},w=(0,a._)("label",{class:"form-label",for:"loginCellponw"},"電話",-1),v=(0,a._)("div",{class:"d-flex justify-content-center"},[(0,a._)("div",{class:"w-50"},[(0,a._)("button",{type:"submit",class:"btn btn-primary btn-block mb-4 w-100"}," 註冊 ")])],-1);function y(e,t,o,l,s,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:t[4]||(t[4]=(0,m.iM)(((...e)=>r.register&&r.register(...e)),["prevent"]))},[(0,a._)("div",d,[u,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e),type:"username",id:"username",class:"form-control"},null,512),[[m.nr,s.username]])]),(0,a._)("div",p,[g,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.email=e),type:"email",id:"email",class:"form-control"},null,512),[[m.nr,s.email]])]),(0,a._)("div",f,[h,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>s.password=e),id:"loginPassword",class:"form-control"},null,512),[[m.nr,s.password]])]),(0,a._)("div",b,[w,(0,a.wy)((0,a._)("input",{type:"phone",id:"loginPassword","onUpdate:modelValue":t[3]||(t[3]=e=>s.cellphone=e),class:"form-control"},null,512),[[m.nr,s.cellphone]])]),v],32)}var _=o(4161),x=o(2492),T=o.n(x),C={data(){return{username:"",email:"",password:"",cellphone:""}},methods:{async register(){try{const e=await _.Z.post("http://localhost:3000/api/admin/register",{username:this.username,email:this.email,password:this.password,cellphone:this.cellphone});console.log(e),this.showAlert(),this.username="",this.email="",this.password="",this.cellphone=""}catch(e){console.error("Login error:",e)}},showAlert(){T().fire({title:"註冊成功",icon:"success",timer:2e3,timerProgressBar:!0})}}},k=o(89);const j=(0,k.Z)(C,[["render",y]]);var S=j;const L={class:""},P={class:"tab-pane fade show active",id:"pills-login",role:"tabpanel","aria-labelledby":"tab-login"},V={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},Z=(0,a._)("label",{class:"form-label",for:"loginName"},"帳號(電子郵件)",-1),U={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},A=(0,a._)("label",{class:"form-label",for:"loginPassword"},"密碼",-1),N=(0,a.uE)('<div class="row mb-4"><div class="col-md-6 d-flex justify-content-center"><a href="#!">忘記密碼?</a></div></div><div class="d-flex justify-content-center"><div class="w-50"><button type="submit" class="btn btn-primary btn-block mb-4 w-100"> 登入 </button></div></div>',2);function F(e,t,o,l,s,r){return(0,a.wg)(),(0,a.iD)("div",L,[(0,a._)("div",P,[(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,m.iM)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,a._)("div",V,[Z,(0,a.wy)((0,a._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),id:"loginName",class:"form-control"},null,512),[[m.nr,s.email]])]),(0,a._)("div",U,[A,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),id:"loginPassword",class:"form-control"},null,512),[[m.nr,s.password]])]),N],32)])])}o(7658);var I={data(){return{email:"",password:""}},methods:{async login(){try{const e=await _.Z.post("http://localhost:3000/api/admin/login",{email:this.email,password:this.password}),t=e.data.token,o=(e.data.email,e.data.id);localStorage.setItem("token",t),localStorage.setItem("id",o),localStorage.setItem("email",this.email),console.log("-----"),console.log(e),this.$router.push("/user"),this.showAlert(),this.username="",this.password=""}catch(e){console.error("Login error:",e)}},showAlert(){T().fire({position:"center",icon:"success",title:"登入成功",showConfirmButton:!1,timer:1500})}}};const B=(0,k.Z)(I,[["render",F]]);var D=B,$=o(971),H={name:"HomeView",components:{RegisterForm:S,LoginForm:D,Navbar:$.Z},data(){return{activeTab:"login",cartTotal:0}},methods:{signIn(){},updateCartTotal(e){this.cartTotal=e},async getCart(){console.log(localStorage.email),console.log(localStorage);try{const e=await _.Z.get(`http://localhost:3000/api/admin/userCart/${localStorage.email}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),t=e.data;console.log(t),console.log(t),console.log(t),this.cartProduct=t,localStorage.cart=t.length,this.updateCartTotal(this.cartTotal),this.cartTotal=e.data.length,this.cartTotal=e.data.reduce(((e,t)=>e+t.quantity),0)}catch(e){console.error("Login error:",e)}}},created(){this.getCart()}};const M=(0,k.Z)(H,[["render",c]]);var R=M}}]);
//# sourceMappingURL=992.e4161784.js.map