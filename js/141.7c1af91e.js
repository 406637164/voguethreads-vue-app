"use strict";(self["webpackChunke_commerce_front"]=self["webpackChunke_commerce_front"]||[]).push([[141],{4141:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var o=a(3396),l=a(9242);const r={class:"container editusercontent w-50"},n=(0,o._)("div",{class:"tabs d-flex"},[(0,o._)("a",{class:"tab-item active",href:"#"},[(0,o._)("b",null,"個人資訊")]),(0,o._)("a",{class:"tab-item",href:"/userOrder"},"我的訂單")],-1),s={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},c=(0,o._)("label",{class:"form-label",for:"loginName"},"姓名",-1),i={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},u=(0,o._)("label",{class:"form-label",for:"loginName"},"帳號(電子郵件)",-1),d={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},m=(0,o._)("label",{class:"form-label",for:"loginName"},"地址",-1),h={class:"form-outline mb-4 d-flex justify-content-center align-items-center p-3 px-2"},g=(0,o._)("label",{class:"form-label",for:"loginName"},"聯絡電話",-1),p={class:"form-outline mb-4 d-flex justify-content-center align-items-center px-2"},f=(0,o._)("button",{type:"button",class:"btn btn-outline-primary btn-lg"}," 儲存變更 ",-1);function b(t,e,a,b,y,_){const v=(0,o.up)("Navbar");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(v,{cartTotal:y.cartTotal},null,8,["cartTotal"]),(0,o._)("div",r,[n,(0,o._)("div",s,[c,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>y.username=t),type:"username",id:"username",class:"form-control"},null,512),[[l.nr,y.username]])]),(0,o._)("div",i,[u,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>y.email=t),type:"email",id:"username",class:"form-control"},null,512),[[l.nr,y.email]])]),(0,o._)("div",d,[m,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>y.address=t),type:"addaddressress",id:"username",class:"form-control"},null,512),[[l.nr,y.address]])]),(0,o._)("div",h,[g,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>y.cellphone=t),type:"cellphone",id:"cellphone",class:"form-control"},null,512),[[l.nr,y.cellphone]])]),(0,o._)("div",p,[f,(0,o._)("button",{type:"button",id:"logout",class:"btn btn-outline-primary btn-lg",onClick:e[4]||(e[4]=(...t)=>_.logout&&_.logout(...t))}," 登出 ")])])],64)}a(7658);var y=a(4161),_=a(2492),v=a.n(_),w=a(971),T={name:"HomeView",components:{Navbar:w.Z},data(){return{username:" ",email:"",address:"",cellphone:"",activeTab:"User",cartTotal:0}},methods:{async getCart(){console.log(localStorage.email),console.log(localStorage);try{const t=await y.Z.get(`http://localhost:3000/api/admin/userCart/${localStorage.email}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e=t.data;this.cartProduct=e,localStorage.cart=e.length,this.updateCartTotal(this.cartTotal),this.cartTotal=t.data.length,this.cartTotal=t.data.reduce(((t,e)=>t+e.quantity),0)}catch(t){console.error("Login error:",t)}},logout(){localStorage.clear(),console.log(localStorage),this.$router.push("/login"),v().fire({title:"已登出",icon:"success",timer:2e3,timerProgressBar:!0})},updateCartTotal(t){this.cartTotal=t},async getUserInfo(){try{const t=await y.Z.get("http://localhost:3000/api/admin/login",{headers:{Authorization:`Bearer ${localStorage.token}`}}),e=t.data.data;this.username=e.user,this.email=e.email,this.address=e.address,this.cellphone=e.cellphone}catch(t){console.error("Login error:",t),this.$router.push("/login")}}},async getCart(){try{const t=await y.Z.get(`http://localhost:3000/api/admin/userCart/${localStorage.email}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e=t.data;this.cartProduct=e,this.cartTotal=t.data.reduce(((t,e)=>t+e.quantity),0),localStorage.cart=this.cartTotal}catch(t){console.error("Login error:",t),this.showlogin(),this.$router.push("/login")}},created(){this.getUserInfo(),this.getCart()}},x=a(89);const S=(0,x.Z)(T,[["render",b]]);var C=S}}]);
//# sourceMappingURL=141.7c1af91e.js.map