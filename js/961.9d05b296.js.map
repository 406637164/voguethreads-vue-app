{"version":3,"file":"js/961.9d05b296.js","mappings":"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","sources":["webpack://e-commerce-front/./src/views/OrderView.vue","webpack://e-commerce-front/./src/views/OrderView.vue?77c4"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container items\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-6\">\r\n          <div class=\"card card-titles\">\r\n            <div class=\"card-header\">\r\n              <h5 class=\"mb-0\">填寫個人基本資料</h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <form>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"name\" class=\"form-label\">姓名</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"name\"\r\n                    id=\"name\"\r\n                    class=\"form-control\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"cellphone\" class=\"form-label\">電話</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"cellphone\"\r\n                    id=\"cellphone\"\r\n                    class=\"form-control\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"address\" class=\"form-label\">寄件地址</label>\r\n                  <div class=\"city-selector-set d-flex\">\r\n                    <!-- 縣市選單 -->\r\n                    <div>\r\n                      <select\r\n                        class=\"district\"\r\n                        v-model=\"selectedcity\"\r\n                        :value=\"selectedcity\"\r\n                      >\r\n                        <option v-for=\"city in country\" :key=\"city\">\r\n                          {{ city }}\r\n                        </option>\r\n                      </select>\r\n                    </div>\r\n                    <!-- 區域選單 -->\r\n                    <div>\r\n                      <select v-model=\"place\" :value=\"place\" class=\"place\">\r\n                        <option value=\"\" v-if=\"countrygroups.length == 0\">\r\n                          選擇地區\r\n                        </option>\r\n                        <option\r\n                          v-for=\"place in countrygroups\"\r\n                          :key=\"place\"\r\n                          :value=\"place\"\r\n                        >\r\n                          {{ place }}\r\n                        </option>\r\n                      </select>\r\n                      <input type=\"address\" name=\"\" id=\"\" />\r\n                    </div>\r\n                    <!-- 郵遞區號欄位 (建議加入 readonly 屬性，防止修改) -->\r\n                  </div>\r\n\r\n                  <!-- <input\r\n                    type=\"text\"\r\n                    v-model=\"address\"\r\n                    id=\"address\"\r\n                    class=\"form-control\"\r\n                  /> -->\r\n                </div>\r\n\r\n                <div class=\"mb-3\">\r\n                  <label for=\"message\" class=\"form-label\">備註</label>\r\n                  <textarea\r\n                    v-model=\"message\"\r\n                    class=\"form-control\"\r\n                    id=\"message\"\r\n                    name=\"message\"\r\n                    rows=\"4\"\r\n                  ></textarea>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-md-6\">\r\n          <div class=\"card card-titles\">\r\n            <div class=\"card-header\">\r\n              <h5 class=\"mb-0\">訂單摘要</h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"mb-3\">\r\n                <p class=\"summary\">商品總計: {{ amount }}元</p>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <fieldset>\r\n                  <legend>請選擇付款方式</legend>\r\n\r\n                  <div class=\"radios\">\r\n                    <input type=\"radio\" name=\"pay\" value=\"Line Pay\" checked />\r\n                    <label for=\"Line\">Line Pay</label>\r\n                  </div>\r\n\r\n                  <div class=\"radios\">\r\n                    <input type=\"radio\" name=\"pay\" value=\"credit\" />\r\n                    <label for=\"credit\">信用卡</label>\r\n                  </div>\r\n                </fieldset>\r\n              </div>\r\n\r\n              <div class=\"mb-3\" style=\"max-height: 400px; overflow-y: auto\">\r\n                <h5>已選擇的商品:</h5>\r\n\r\n                <div class=\"row products\">\r\n                  <div class=\"col-6\" v-for=\"item in cartProduct\" :key=\"item.id\">\r\n                    <div class=\"card card-orders\">\r\n                      <img\r\n                        :src=\"item.image\"\r\n                        alt=\"商品图片\"\r\n                        class=\"card-img-top\"\r\n                        style=\"max-height: 100px\"\r\n                      />\r\n                      <div class=\"card-body\">\r\n                        <h6 class=\"card-title\">{{ item.name }}</h6>\r\n                        <p class=\"card-text\">數量: {{ item.quantity }}</p>\r\n                        <p class=\"card-text\">價格: {{ item.price }}元</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <button\r\n                  class=\"w-100 ordersubmit\"\r\n                  id=\"submitOrder\"\r\n                  @click=\"submitOrder\"\r\n                >\r\n                  送出訂單\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n.items {\r\n  height: 70vh;\r\n  /* box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); */\r\n  /* background-color: rgba(238, 237, 237, 0.4); */\r\n}\r\n.card-item {\r\n  margin-top: 5px;\r\n  height: 230px;\r\n  box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.2);\r\n  padding: 5px;\r\n}\r\n.products {\r\n  height: 80vh;\r\n  overflow: scroll;\r\n}\r\n.form-check {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.right {\r\n  padding: 30px;\r\n  /* box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.2); */\r\n  margin-left: 30px;\r\n}\r\n#submitOrder {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  font-size: 32px;\r\n}\r\n#submitOrder:hover {\r\n  background-color: #d0a896;\r\n}\r\n\r\n.form-label {\r\n  width: 100px;\r\n}\r\n.ordertitle {\r\n  display: flex;\r\n  font-weight: bold;\r\n  padding: 10px;\r\n  font-size: 2rem;\r\n  letter-spacing: 0.5cm;\r\n  justify-content: center;\r\n}\r\n.district {\r\n  margin-right: 10px;\r\n}\r\n.place {\r\n  margin-right: 10px;\r\n}\r\n.ordersubmit {\r\n  width: 100%;\r\n  color: white;\r\n  background-color: #c8815f;\r\n\r\n  z-index: 3;\r\n  line-height: 50px;\r\n  position: absolute;\r\n  bottom: 0px;\r\n  right: 0;\r\n  border: 0px solid transparent;\r\n  font-weight: bold;\r\n}\r\n.radios {\r\n  margin-top: 5px;\r\n  font-size: 18px;\r\n  display: flex;\r\n}\r\n.radios input {\r\n  margin-right: 5px;\r\n}\r\n.radios label {\r\n  padding-left: 5px;\r\n  margin-right: 15px;\r\n}\r\nlegend {\r\n  font-size: 18px;\r\n}\r\n.card-header {\r\n  background-color: #c8815f;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n.card-titles {\r\n  padding: 0;\r\n}\r\n.card-orders {\r\n  padding: 0;\r\n}\r\n.summary {\r\n  font-size: 1.25rem;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n<script>\r\nimport Cookies from 'js-cookie';\r\nimport Swal from 'sweetalert2';\r\nimport axios from 'axios';\r\nimport TwCitySelector from '../assets/AllData.json';\r\nimport Navbar from '../components/NavBar.vue';\r\nexport default {\r\n  name: 'order',\r\n  components: {\r\n    Navbar,\r\n  },\r\n  data() {\r\n    return {\r\n      cartProduct: [],\r\n      itemcount: 0,\r\n      cartTotal: 0,\r\n      itemtotal: 0,\r\n      amount: 0,\r\n      name: '',\r\n      address: '',\r\n      cellphone: '',\r\n      paymentMethod: '',\r\n      message: '',\r\n      country: [],\r\n      selectedcity: '',\r\n      countrygroups: [],\r\n      place: '',\r\n      myCounty: TwCitySelector,\r\n    };\r\n  },\r\n  watch: {\r\n    selectedcity(newValue) {\r\n      // 在selectedCity变化时更新區域选项\r\n\r\n      this.countrygroups = this.myCounty\r\n        .find((c) => c.CityName == newValue)\r\n        .AreaList.map((area) => area.AreaName);\r\n      this.place = this.countrygroups[0];\r\n    },\r\n  },\r\n  methods: {\r\n    checkout() {\r\n      this.cartProduct = JSON.parse(Cookies.get('cartProduct'));\r\n      this.amount = this.cartProduct.reduce((total, item) => {\r\n        return total + item.price * item.quantity;\r\n      }, 0);\r\n    },\r\n    async setaddress() {\r\n      console.log(this.myCounty);\r\n\r\n      this.country = this.myCounty.map((city) => city.CityName);\r\n      this.selectedcity = this.country[0];\r\n      // console.log(this.myCounty.filter(f=>f.));\r\n      console.log(this.selectedcity);\r\n    },\r\n    submitOrder() {\r\n      this.showcheck();\r\n    },\r\n    async showcheck() {\r\n      console.log(localStorage.id);\r\n      console.log(this.cartProduct);\r\n      console.log(this.name);\r\n      console.log(this.cellphone);\r\n      console.log(this.address);\r\n\r\n      console.log(this.message);\r\n      console.log(this.totalPrice);\r\n      console.log(this.paymentMethod);\r\n      // {\r\n      //   headers: { Authorization: `Bearer ${localStorage.token}` },\r\n      // }\r\n\r\n      const response = await axios.post(\r\n        'http://localhost:3000/api/admin/order',\r\n        {\r\n          userid: localStorage.id,\r\n          name: this.name,\r\n          phone: this.cellphone,\r\n          address: this.address,\r\n          amount: this.amount,\r\n          Payment_method: this.paymentMethod,\r\n          message: this.message,\r\n          products: this.cartProduct,\r\n        }\r\n      );\r\n      console.log(response);\r\n      window.location.href = response.data;\r\n      //amount(totalPrice) currency\r\n      //id(products_1)  amount products  {\r\n      // name: '六角棒棒',\r\n      // quantity: 1,\r\n      // price: 10,\r\n      // }\r\n\r\n      // const response2 = await axios.post('http://localhost:3000/createOrder',{\"amount\":this.totalPrice,\"currency\":\"TWD\",});\r\n\r\n      // Swal.fire({\r\n      //   position: 'center',\r\n      //   icon: 'success',\r\n      //   title: '訂單已送出',\r\n      //   showConfirmButton: false,\r\n      //   timer: 1500,\r\n      // });\r\n\r\n      // this.$router.push({\r\n      //   name: 'user', // 路由名称，对应于路由配置中的'name'\r\n      //   params: { activeTab: 'Order' }, // 路由参数\r\n      // });\r\n    },\r\n  },\r\n  created() {\r\n    this.checkout();\r\n    this.setaddress();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./OrderView.vue?vue&type=template&id=178814f1\"\nimport script from \"./OrderView.vue?vue&type=script&lang=js\"\nexport * from \"./OrderView.vue?vue&type=script&lang=js\"\n\nimport \"./OrderView.vue?vue&type=style&index=0&id=178814f1&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","value","type","name","id","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","$data","$event","_hoisted_9","_hoisted_10","cellphone","_hoisted_11","_hoisted_12","_hoisted_13","selectedcity","_Fragment","_renderList","country","city","key","_toDisplayString","place","countrygroups","length","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","message","rows","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","amount","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","cartProduct","item","_hoisted_31","src","image","alt","_hoisted_33","_hoisted_34","_hoisted_35","quantity","_hoisted_36","price","_hoisted_37","onClick","_cache","args","$options","submitOrder","components","Navbar","data","itemcount","cartTotal","itemtotal","address","paymentMethod","myCounty","TwCitySelector","watch","newValue","this","find","c","CityName","AreaList","map","area","AreaName","methods","checkout","JSON","parse","Cookies","get","reduce","total","setaddress","console","log","showcheck","localStorage","totalPrice","response","axios","post","userid","phone","Payment_method","products","window","location","href","created","__exports__","render"],"sourceRoot":""}