"use strict";(self["webpackChunke_commerce_front"]=self["webpackChunke_commerce_front"]||[]).push([[179],{9179:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var d=a(3396),i=a(7139),s=a(9242);const l={ref:"header"},o=(0,d.uE)('<a href="/" class="logo">VogueThreads</a><ul class="navlists"><li><a href="/">商品管理</a></li><li><a href="#">訂單管理</a></li><li><a href="/about">人員管理</a></li></ul><div class="header-icons"><a class="btn-square" href="/user"><button id="member"><span class="bi bi-person-circle"></span></button></a></div>',3),c=[o],r={key:0,class:"loading-overlay"},n=(0,d._)("div",{class:"spinner-border text-primary",role:"status"},[(0,d._)("span",{class:"visually-hidden"},"Loading...")],-1),u=[n],m={class:"container"},p={class:"d-flex"},g={class:"manage-container"},b={class:"manage-item-lists"},h=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",{class:"item_detail"},"商品"),(0,d._)("th",{class:"price"},"單價"),(0,d._)("th",{class:"count"},"庫存"),(0,d._)("th",{class:"amount"},"類別"),(0,d._)("th",{class:"operate"},"編輯")])],-1),_={class:"scrollable-tbody"},f={class:"item_detail"},y=["href"],P=["src"],v={class:"name"},k={class:"price"},w={class:"count"},L=["onClick"],U=["onClick"],x={class:"amount"},q={class:"operate"},C=["onClick"],D=(0,d._)("i",{class:"bx bx-edit"},null,-1),R=[D],I=["onClick"],M=(0,d._)("i",{class:"bx bxs-trash"},null,-1),V=[M],z={class:"modal fade",id:"exampleModal",ref:"myModalRef",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},E={class:"modal-dialog modal-dialog-centered modal-xl"},Z={class:"modal-content"},H=(0,d._)("div",{class:"modal-header"},[(0,d._)("h5",{class:"modal-title",id:"exampleModalLabel"},"修改產品內容"),(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),N={class:"modal-body"},Y={class:"mb-3 image-block"},$=["src"],S=["src"],j={class:"mb-3"},A=(0,d._)("label",{for:"productName",class:"form-label"},"商品名稱",-1),F={class:"mb-3"},K=(0,d._)("label",{for:"productPrice",class:"form-label"},"金額",-1),O={class:"mb-3"},T=(0,d._)("label",{for:"productStock",class:"form-label"},"庫存",-1),W={class:"mb-3"},B=(0,d._)("label",{for:"productDescription",class:"form-label"},"商品描述",-1),G={class:"modal-footer"},J=(0,d._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1),Q=(0,d._)("footer",{class:"footer"},[(0,d._)("p",null,"© 2023 Your Website. All rights reserved.")],-1);function X(e,t,a,o,n,D){return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("header",l,c,512),n.isLoading?((0,d.wg)(),(0,d.iD)("div",r,u)):(0,d.kq)("",!0),(0,d._)("div",m,[(0,d._)("div",p,[(0,d._)("div",g,[(0,d._)("table",b,[h,(0,d._)("tbody",_,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(n.products,((t,a)=>((0,d.wg)(),(0,d.iD)("tr",{key:t.name},[(0,d._)("td",f,[(0,d._)("a",{href:`/product/${t.name}`},[(0,d._)("img",{src:t.image,alt:""},null,8,P),(0,d._)("div",v,[(0,d._)("span",null,(0,i.zw)(t.name),1)])],8,y)]),(0,d._)("td",k,(0,i.zw)(t.price),1),(0,d._)("td",w,[t.edit?((0,d.wg)(),(0,d.iD)("button",{key:0,class:"btn dels",onClick:d=>e.reduceitem(t,a)}," - ",8,L)):(0,d.kq)("",!0),(0,d.Uk)(" "+(0,i.zw)(t.qty)+" ",1),t.edit?((0,d.wg)(),(0,d.iD)("button",{key:1,class:"btn adds",onClick:d=>e.additem(t,a)}," + ",8,U)):(0,d.kq)("",!0)]),(0,d._)("td",x,(0,i.zw)(t.category),1),(0,d._)("td",q,[(0,d._)("button",{"data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"btn btn-outline-success btn-sm operate",onClick:e=>D.edititem(t,a)},R,8,C),(0,d._)("button",{class:"btn btn-outline-danger btn-sm operate",onClick:d=>e.deleteitem(t,a)},V,8,I)])])))),128))])])])])]),(0,d._)("div",z,[(0,d._)("div",E,[(0,d._)("div",Z,[H,(0,d._)("div",N,[(0,d._)("div",Y,[null!=n.editedProduct.imageURL?((0,d.wg)(),(0,d.iD)("img",{key:0,src:n.editedProduct.imageURL,alt:"Uploaded Image",class:"mt-3 modal-img"},null,8,$)):((0,d.wg)(),(0,d.iD)("img",{key:1,src:n.editedProduct.image,alt:"Uploaded Image",class:"mt-3 modal-img"},null,8,S)),(0,d._)("input",{type:"file",ref:"imageInput",class:"form-control",id:"productImage",accept:"image/*",onChange:t[0]||(t[0]=(...e)=>D.handleImageUpload&&D.handleImageUpload(...e))},null,544)]),(0,d._)("div",j,[A,(0,d.wy)((0,d._)("input",{type:"text",class:"form-control",id:"productName","onUpdate:modelValue":t[1]||(t[1]=e=>n.editedProduct.name=e)},null,512),[[s.nr,n.editedProduct.name]])]),(0,d._)("div",F,[K,(0,d.wy)((0,d._)("input",{type:"number",class:"form-control",id:"productPrice","onUpdate:modelValue":t[2]||(t[2]=e=>n.editedProduct.price=e)},null,512),[[s.nr,n.editedProduct.price]])]),(0,d._)("div",O,[T,(0,d.wy)((0,d._)("input",{type:"number",class:"form-control",id:"productStock","onUpdate:modelValue":t[3]||(t[3]=e=>n.editedProduct.qty=e)},null,512),[[s.nr,n.editedProduct.qty]])]),(0,d._)("div",W,[B,(0,d.wy)((0,d._)("textarea",{type:"number",class:"form-control",id:"productDescription","onUpdate:modelValue":t[4]||(t[4]=e=>n.editedProduct.description=e)},null,512),[[s.nr,n.editedProduct.description]])])]),(0,d._)("div",G,[J,(0,d._)("button",{type:"button","data-bs-dismiss":"modal",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>D.saveEditedProduct&&D.saveEditedProduct(...e))}," 保存 ")])])])],512),Q],64)}a(6229),a(7330),a(2062);var ee=a(971),te=a(4161),ae=a(2492),de=a.n(ae),ie={name:"HomeView",components:{Navbar:ee.Z},data(){return{isLoading:!0,products:[],editedProduct:{id:"",name:"",price:0,qty:0,imageURL:null,image:null,description:null}}},methods:{async edititem(e,t){let a=this.$refs.imageInput;a.value="",this.editedProduct.image=null,this.editedProduct.imageURL=null,this.$refs.myModalRef.classList.add("show"),console.log(e.image),console.log(e),this.editedProduct.id=e.id,this.editedProduct.name=e.name,this.editedProduct.price=e.price,this.editedProduct.qty=e.qty,this.editedProduct.image=e.image,this.editedProduct.description=e.description},async getproduct(){this.isLoading=!0;const e=await te.Z.get("http://localhost:3000/api/products");e.data.map(((e,t)=>e.edit=0)),this.products=e.data,this.isLoading=!1,console.log(e.data)},handleImageUpload(e){const t=e.target.files[0];console.log(this.editedProduct.image),console.log(t),this.editedProduct.image=t,this.editedProduct.imageURL=URL.createObjectURL(t),console.log(this.editedProduct)},async saveEditedProduct(){this.isLoading=!0;let e=this.products.find((e=>e.id==this.editedProduct.id));e.name=this.editedProduct.name,e.price=this.editedProduct.price,e.qty=this.editedProduct.qty,null!=this.editedProduct.imageURL&&(e.image=this.editedProduct.imageURL),console.log(this.editedProduct.image.name);const t=new FormData;console.log(e.id),console.log(e.price),t.append("id",this.editedProduct.id),t.append("name",this.editedProduct.name),t.append("price",this.editedProduct.price),t.append("stock",this.editedProduct.qty),t.append("image",this.editedProduct.image),console.log(t);try{await te.Z.patch("http://localhost:3000/api/manage/uploads/"+this.editedProduct.image.name,t);this.isLoading=!1,de().fire("資料已更新","","success")}catch(a){console.error("上傳失敗",a)}}},created(){this.getproduct()}},se=a(89);const le=(0,se.Z)(ie,[["render",X]]);var oe=le}}]);
//# sourceMappingURL=179.8bed428b.js.map