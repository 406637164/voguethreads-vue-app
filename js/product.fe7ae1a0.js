"use strict";(self["webpackChunke_commerce_front"]=self["webpackChunke_commerce_front"]||[]).push([[18],{8801:function(t,a,e){e.r(a),e.d(a,{default:function(){return V}});var o=e(3396),s=e(9242),r=e(7139);const l={key:0,class:"loading-overlay"},i=(0,o._)("div",{class:"spinner-border text-primary",role:"status"},[(0,o._)("span",{class:"visually-hidden"},"Loading...")],-1),c=[i],n=(0,o._)("div",{class:"boy"},[(0,o._)("div",{class:"txt"},"秋季上衣")],-1),u={class:"container"},h={class:"container-fluid searchBar-container"},g={class:"d-flex justify-content-end",role:"search"},d={class:"btn-group",role:"group","aria-label":"Basic example"},p={class:"searchlist"},m={key:0},_=["href"],w=["src"],T={class:"row"},f={class:"product-list"},y={class:"box"},v=["href"],b=["src"],k={class:"cart"},C=["onClick"],P=(0,o._)("i",{class:"bx bx-shopping-bag"},null,-1),x=[P],S={key:1,"aria-label":"...",class:"pagination-container"},$={class:"pagination"},q={class:"page-item"},N={class:"page-item","aria-current":"page"},D=["onClick"],z={class:"page-item"},Z=(0,o._)("footer",{class:"footer"},[(0,o._)("p",null,"© 2023 Your Website. All rights reserved.")],-1);function B(t,a,e,i,P,B){const L=(0,o.up)("Navbar"),H=(0,o.up)("NoFound");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(L,{cartTotal:P.cartTotal},null,8,["cartTotal"]),P.isLoading?((0,o.wg)(),(0,o.iD)("div",l,c)):(0,o.kq)("",!0),n,(0,o._)("div",u,[(0,o._)("div",h,[(0,o._)("form",g,[(0,o._)("div",d,[(0,o.wy)((0,o._)("input",{class:"form-control me-2",type:"search",placeholder:"找尋產品",onInput:a[0]||(a[0]=(...t)=>B.handleInput&&B.handleInput(...t)),"onUpdate:modelValue":a[1]||(a[1]=t=>P.searchText=t),"aria-label":"Search"},null,544),[[s.nr,P.searchText]]),(0,o._)("div",p,[P.searchText.length>0?((0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.searchResults,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"d-flex"},[(0,o._)("a",{href:`http://localhost:8080/product/${t.name}`,class:"searchResults"},[(0,o._)("img",{src:t.image,alt:"",class:"searchimg"},null,8,w),(0,o._)("span",null,(0,r.zw)(t.name),1)],8,_)])))),128))])):(0,o.kq)("",!0)])])])]),P.isnofound?((0,o.wg)(),(0,o.j4)(H,{key:0})):(0,o.kq)("",!0),(0,o._)("div",T,[(0,o._)("div",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.products,(t=>((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("a",{href:`/product/${t.name}`,class:"productlink"},[(0,o._)("img",{src:t.image,alt:""},null,8,b),(0,o._)("h5",null,(0,r.zw)(t.name),1),(0,o._)("h6",null,"NT "+(0,r.zw)(t.price),1)],8,v),(0,o._)("div",k,[(0,o._)("button",{type:"button",class:"btn btn-outline-danger",onClick:a=>B.addToCart(t,1)},x,8,C)])])))),256))])]),P.currentpage<=P.totalPage?((0,o.wg)(),(0,o.iD)("nav",S,[(0,o._)("ul",$,[(0,o._)("li",q,[(0,o._)("a",{class:(0,r.C_)(["page-link",{disabled:1===P.currentpage}]),href:"#",onClick:a[2]||(a[2]=t=>B.setPage(P.currentpage-1))},"Previous",2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.totalPage,(t=>((0,o.wg)(),(0,o.iD)("li",N,[(0,o._)("a",{class:(0,r.C_)(["page-link",{active:P.currentpage==t}]),onClick:a=>B.setPage(t),href:"#"},(0,r.zw)(t),11,D)])))),256)),(0,o._)("li",z,[(0,o._)("a",{class:(0,r.C_)(["page-link",{disabled:P.currentpage===P.totalPage}]),href:"#",onClick:a[3]||(a[3]=t=>B.setPage(+this.$route.params.page+1))},"Next",2)])])])):(0,o.kq)("",!0)]),Z],64)}e(7658);var L=e(4161),H=e(9336),R=e(2492),Y=e.n(R),I=e(971),A={name:"HomeView",components:{NoFound:H.Z,Navbar:I.Z},data(){return{products:[],isLoading:!1,currentpage:+this.$route.params.page,isnofound:!1,totalPage:"",cartTotal:0,cartProduct:[],cartProduct:[],searchText:"",searchResults:[],searchText:"",keywords:[],searchTimer:null}},methods:{handleInput(){clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.updateSearchResults()}),500)},async updateSearchResults(){const t=await L.Z.get("http://localhost:3000/api/products");console.log("执行搜索操作:",this.searchText),console.log("执行搜索操作:",t);const a=t.data.map((t=>({name:t.name,price:t.price,image:t.image})));this.searchResults=a.filter((t=>t.name.includes(this.searchText)))},updateCartTotal(t){this.cartTotal=t},async getCart(){console.log(localStorage.email);try{const t=await L.Z.get(`http://localhost:3000/api/admin/userCart/${localStorage.email}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a=t.data;console.log(a),this.cartProduct=a,localStorage.cart=a.length,this.updateCartTotal(this.cartTotal),this.cartTotal=t.data.length,this.cartTotal=t.data.reduce(((t,a)=>t+a.quantity),0)}catch(t){console.error("Login error:",t)}},async addToCart(t,a){console.log(localStorage);const e=t.name,o=a,s=localStorage.email;if(console.log(t.name),console.log(e,o,s),console.log(this.cartTotal),0!=localStorage.length)try{await L.Z.post("http://localhost:3000/api/admin/cart",{name:e,email:s,quantity:o},{headers:{Authorization:`Bearer ${localStorage.token}`}});this.updateCartTotal(this.cartTotal+1),this.showalert()}catch(r){this.showlogin(),console.error("Login error:",r)}else 0==localStorage.length&&this.showlogin();console.log(this.cartProduct)},showalert(){Y().fire({position:"center",icon:"success",title:"加入購物車成功",showConfirmButton:!1,timer:1500})},showlogin(){Y().fire({position:"center",icon:"error",title:"您尚未登入會員",showConfirmButton:!1,timer:1500})},goToPage(t=1){this.isLoading=!0,this.isnofound=!1;const a=`http://localhost:3000/api/products/getwarm/page=${this.currentpage}`;console.log(a),this.$http.get(a).then((a=>{console.log(a),this.products=a.data.data,this.currentpage=t,this.totalPage=a.data.totalPage,console.log(this.currentpage),console.log(this.totalPage),this.isLoading=!1,0==this.products.length&&(this.isnofound=!0)}))},setPage(t){console.log(t),this.currentpage=t,this.$router.push({name:"boy",params:{page:this.currentpage}}),this.goToPage(this.currentpage)}},created(){this.setPage(+this.$route.params.page),this.getCart()}},U=e(89);const K=(0,U.Z)(A,[["render",B]]);var V=K},934:function(t,a,e){e.r(a),e.d(a,{default:function(){return Z}});var o=e(3396),s=e(7139),r=e(9242);const l={class:"container"},i={class:"row"},c={class:"d-flex box"},n={class:"product-img"},u=["src"],h={class:"product-txt"},g={class:"title"},d=(0,o._)("span",{class:"detail"},"【商品說明】",-1),p={class:"detail-txt"},m={key:0},_={class:"price"},w={class:"discounts"},T={class:"discount"},f=(0,o._)("i",{class:"bx bxs-right-arrow-alt"},null,-1),y={key:1},v={class:"price"},b={class:"addcheck"},k=(0,o._)("i",{class:"bx bx-shopping-bag"},null,-1),C=(0,o._)("footer",{class:"footer"},[(0,o._)("p",null,"© 2023 Your Website. All rights reserved.")],-1);function P(t,a,e,P,x,S){const $=(0,o.up)("Navbar");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)($,{cartTotal:x.cartTotal},null,8,["cartTotal"]),(0,o._)("div",l,[(0,o._)("div",i,[(0,o._)("div",c,[(0,o._)("div",n,[(0,o._)("img",{src:x.image,alt:""},null,8,u)]),(0,o._)("div",h,[(0,o._)("span",g,(0,s.zw)(x.productName),1),d,(0,o._)("ul",null,[(0,o._)("li",p,(0,s.zw)(x.description),1),x.discount<1?((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("del",_,"原價 NT"+(0,s.zw)(x.productPrice*x.quantity)+" 元 ",1),(0,o._)("span",w,"打"+(0,s.zw)(10*x.discount)+"折",1),(0,o._)("span",T,[f,(0,o.Uk)(" 折扣價 NT"+(0,s.zw)(x.productPrice*x.discount*x.quantity)+" 元",1)])])):((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("span",v,"商品售價 NT"+(0,s.zw)(x.productPrice*x.quantity)+" 元 ",1)])),(0,o._)("div",b,[(0,o._)("button",{class:"btn btn-secondary",style:{width:"40px"},onClick:a[0]||(a[0]=(...t)=>S.decrement&&S.decrement(...t))}," - "),(0,o.wy)((0,o._)("input",{type:"number",class:"form-control quantity","onUpdate:modelValue":a[1]||(a[1]=t=>x.quantity=t),min:"1",style:{width:"200px"}},null,512),[[r.nr,x.quantity]]),(0,o._)("button",{class:"btn btn-secondary",style:{width:"40px"},onClick:a[2]||(a[2]=(...t)=>S.increment&&S.increment(...t))}," + "),(0,o._)("button",{class:"btn btn-outline-danger",id:"addcart",onClick:a[3]||(a[3]=t=>S.addToCart(x.productName))},[k,(0,o.Uk)(" 加入購物車 ")])])])])])])]),C],64)}var x=e(971),S=e(4161),$=e(2492),q=e.n($),N={name:"HomeView",components:{Navbar:x.Z},data(){return{productName:"Urban Tee",productPrice:100,discount:.2,description:"dsadsadas",activeTab:"User",cartTotal:0,quantity:1,image:"",orgquantity:0,sums:0}},methods:{async addToCart(t){let a=this.quantity,e=this.productName;if(console.log(localStorage.token),0!=localStorage.length){this.updateCartTotal(this.cartTotal+a);try{const t=await S.Z.post("http://localhost:3000/api/admin/cart",{name:e,email:localStorage.email,quantity:a},{headers:{Authorization:`Bearer ${localStorage.token}`}});console.log(t),this.showalert()}catch(o){console.error("Login error:",o)}}else 0==localStorage.length&&this.showlogin()},showlogin(){q().fire({position:"center",icon:"error",title:"您尚未登入會員",showConfirmButton:!1,timer:1500})},showalert(){q().fire({position:"center",icon:"success",title:"加入購物車成功",showConfirmButton:!1,timer:1500})},updateCartTotal(t){this.cartTotal=t},decrement(){this.quantity>1&&this.quantity--},increment(){this.quantity++},async getItemProduct(){this.productName=this.$route.params.productName;let t=await S.Z.get(`http://localhost:3000/api/products/${this.productName}`);t=t.data[0],this.name=t.name,this.image=t.image,this.productPrice=+t.price,this.discount=+t.discount,this.description=t.description,console.log(t)},async getCart(){console.log(localStorage.email);try{const t=await S.Z.get(`http://localhost:3000/api/admin/userCart/${localStorage.email}`,{headers:{Authorization:`Bearer ${localStorage.token}`}});console.log("seccuss");const a=t.data;console.log(a),console.log(a),console.log(a),this.cartProduct=a,localStorage.cart=a.length,this.updateCartTotal(this.cartTotal),this.cartTotal=t.data.length,this.cartTotal=t.data.reduce(((t,a)=>t+a.quantity),0)}catch(t){console.error("Login error:",t)}}},created(){this.getCart(),this.getItemProduct()}},D=e(89);const z=(0,D.Z)(N,[["render",P]]);var Z=z},5839:function(t,a,e){e.r(a),e.d(a,{default:function(){return V}});var o=e(3396),s=e(9242),r=e(7139);const l={key:0,class:"loading-overlay"},i=(0,o._)("div",{class:"spinner-border text-primary",role:"status"},[(0,o._)("span",{class:"visually-hidden"},"Loading...")],-1),c=[i],n=(0,o._)("div",{class:"boy"},[(0,o._)("div",{class:"txt"},"夏季短袖")],-1),u={class:"container"},h={class:"container-fluid searchBar-container"},g={class:"d-flex justify-content-end",role:"search"},d={class:"btn-group",role:"group","aria-label":"Basic example"},p={class:"searchlist"},m={key:0},_=["href"],w=["src"],T={class:"row"},f={class:"product-list"},y={class:"box"},v=["href"],b=["src"],k={class:"cart"},C=["onClick"],P=(0,o._)("i",{class:"bx bx-shopping-bag"},null,-1),x=[P],S={key:1,"aria-label":"...",class:"pagination-container"},$={class:"pagination"},q={class:"page-item"},N={class:"page-item","aria-current":"page"},D=["onClick"],z={class:"page-item"},Z=(0,o._)("footer",{class:"footer"},[(0,o._)("p",null,"© 2023 Your Website. All rights reserved.")],-1);function B(t,a,e,i,P,B){const L=(0,o.up)("Navbar"),H=(0,o.up)("NoFound");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(L,{cartTotal:P.cartTotal},null,8,["cartTotal"]),P.isLoading?((0,o.wg)(),(0,o.iD)("div",l,c)):(0,o.kq)("",!0),n,(0,o._)("div",u,[(0,o._)("div",h,[(0,o._)("form",g,[(0,o._)("div",d,[(0,o.wy)((0,o._)("input",{class:"form-control me-2",type:"search",placeholder:"找尋產品",onInput:a[0]||(a[0]=(...t)=>B.handleInput&&B.handleInput(...t)),"onUpdate:modelValue":a[1]||(a[1]=t=>P.searchText=t),"aria-label":"Search"},null,544),[[s.nr,P.searchText]]),(0,o._)("div",p,[P.searchText.length>0?((0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.searchResults,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"d-flex"},[(0,o._)("a",{href:`http://localhost:8080/product/${t.name}`,class:"searchResults"},[(0,o._)("img",{src:t.image,alt:"",class:"searchimg"},null,8,w),(0,o._)("span",null,(0,r.zw)(t.name),1)],8,_)])))),128))])):(0,o.kq)("",!0)])])])]),P.isnofound?((0,o.wg)(),(0,o.j4)(H,{key:0})):(0,o.kq)("",!0),(0,o._)("div",T,[(0,o._)("div",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.products,(t=>((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("a",{href:`/product/${t.name}`,class:"productlink"},[(0,o._)("img",{src:t.image,alt:""},null,8,b),(0,o._)("h5",null,(0,r.zw)(t.name),1),(0,o._)("h6",null,"NT"+(0,r.zw)(t.price),1)],8,v),(0,o._)("div",k,[(0,o._)("button",{type:"button",class:"btn btn-outline-danger",onClick:a=>B.addToCart(t,1)},x,8,C)])])))),256))])]),P.currentpage<=P.totalPage?((0,o.wg)(),(0,o.iD)("nav",S,[(0,o._)("ul",$,[(0,o._)("li",q,[(0,o._)("a",{class:(0,r.C_)(["page-link",{disabled:1===P.currentpage}]),href:"#",onClick:a[2]||(a[2]=t=>B.setPage(P.currentpage-1))},"Previous",2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.totalPage,(t=>((0,o.wg)(),(0,o.iD)("li",N,[(0,o._)("a",{class:(0,r.C_)(["page-link",{active:P.currentpage==t}]),onClick:a=>B.setPage(t),href:"#"},(0,r.zw)(t),11,D)])))),256)),(0,o._)("li",z,[(0,o._)("a",{class:(0,r.C_)(["page-link",{disabled:P.currentpage===P.totalPage}]),href:"#",onClick:a[3]||(a[3]=t=>B.setPage(+this.$route.params.page+1))},"Next",2)])])])):(0,o.kq)("",!0)]),Z],64)}e(7658);var L=e(4161),H=e(9336),R=e(2492),Y=e.n(R),I=e(971),A={name:"HomeView",components:{NoFound:H.Z,Navbar:I.Z},data(){return{products:[],isLoading:!1,currentpage:+this.$route.params.page,isnofound:!1,totalPage:"",cartTotal:0,cartProduct:[],cartProduct:[],searchText:"",searchResults:[],searchText:"",keywords:[],searchTimer:null}},methods:{handleInput(){clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.updateSearchResults()}),500)},async updateSearchResults(){const t=await L.Z.get("http://localhost:3000/api/products");console.log("执行搜索操作:",this.searchText),console.log("执行搜索操作:",t);const a=t.data.map((t=>({name:t.name,price:t.price,image:t.image})));this.searchResults=a.filter((t=>t.name.includes(this.searchText)))},updateCartTotal(t){this.cartTotal=t},async getCart(){console.log(localStorage.email);try{const t=await L.Z.get(`http://localhost:3000/api/admin/userCart/${localStorage.email}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a=t.data;console.log(a),this.cartProduct=a,localStorage.cart=a.length,this.updateCartTotal(this.cartTotal),this.cartTotal=t.data.length,this.cartTotal=t.data.reduce(((t,a)=>t+a.quantity),0)}catch(t){console.error("Login error:",t)}},async addToCart(t,a){console.log(localStorage);const e=t.name,o=a,s=localStorage.email;if(console.log(t.name),console.log(e,o,s),console.log(this.cartTotal),0!=localStorage.length)try{const t=await L.Z.post("http://localhost:3000/api/admin/cart",{name:e,email:s,quantity:o},{headers:{Authorization:`Bearer ${localStorage.token}`}});this.updateCartTotal(this.cartTotal+1),console.log(t),this.showalert()}catch(r){this.showlogin(),console.error("Login error:",r)}else 0==localStorage.length&&this.showlogin();console.log(this.cartProduct)},showalert(){Y().fire({position:"center",icon:"success",title:"加入購物車成功",showConfirmButton:!1,timer:1500})},showlogin(){Y().fire({position:"center",icon:"error",title:"您尚未登入會員",showConfirmButton:!1,timer:1500})},goToPage(t=1){this.isLoading=!0,this.isnofound=!1;const a=`http://localhost:3000/api/products/getshirt/page=${this.currentpage}`;console.log(a),this.$http.get(a).then((a=>{console.log(a),this.products=a.data.data,this.currentpage=t,this.totalPage=a.data.totalPage,console.log(this.currentpage),console.log(this.totalPage),this.isLoading=!1,0==this.products.length&&(this.isnofound=!0)}))},setPage(t){console.log(t),this.currentpage=t,this.$router.push({name:"shirt",params:{page:this.currentpage}}),this.goToPage(this.currentpage)}},created(){this.setPage(+this.$route.params.page),this.getCart()}},U=e(89);const K=(0,U.Z)(A,[["render",B]]);var V=K}}]);
//# sourceMappingURL=product.fe7ae1a0.js.map