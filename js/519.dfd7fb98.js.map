{"version":3,"file":"js/519.dfd7fb98.js","mappings":"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","sources":["webpack://e-commerce-front/./src/views/MyOrderView.vue","webpack://e-commerce-front/./src/views/MyOrderView.vue?fce7"],"sourcesContent":["<template>\r\n  <Navbar :cartTotal=\"cartTotal\"></Navbar>\r\n\r\n  <div class=\"container editusercontent w-50\">\r\n    <div class=\"tabs d-flex\">\r\n      <a class=\"tab-item\" href=\"/user\"> 個人資訊 </a>\r\n      <a class=\"tab-item active\" href=\"#\">我的訂單</a>\r\n    </div>\r\n\r\n    <div class=\"container mt-4\">\r\n      <div v-for=\"(order, index) in orderdata\" :key=\"index\">\r\n        <span @click=\"toggleOrder(index)\" class=\"btn collapse_button\">\r\n          <span class=\"button-text\">訂單編號 {{ order.orderid }}</span>\r\n          <i\r\n            class=\"fa\"\r\n            :class=\"{\r\n              'fa-chevron-down': activeOrder === index,\r\n              'fa-chevron-up': activeOrder !== index,\r\n            }\"\r\n          ></i>\r\n        </span>\r\n        <div v-if=\"activeOrder === index\">\r\n          <h3>訂單詳情</h3>\r\n\r\n          <div class=\"container d-flex flex-column\">\r\n            <span v-if=\"order.ispay\" class=\"item_title\">訂單狀態 已付款</span>\r\n\r\n            <span v-else class=\"item_title\">訂單狀態：尚未付款</span>\r\n            <span class=\"item_title\">所有商品</span>\r\n            <div class=\"d-flex justify-content-center\">\r\n              <template v-for=\"(img, imageIndex) in imagelist[index]\">\r\n                <div class=\"data-imgitem\">\r\n                  <img :src=\"img\" alt=\"\" />\r\n                  <span>{{ namelist[index][imageIndex] }}</span>\r\n                  <div class=\"row\">\r\n                    數量:{{ quantitylist[index][imageIndex] }}\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    價格: {{ pricelist[index][imageIndex] }}\r\n                  </div>\r\n                </div>\r\n              </template>\r\n            </div>\r\n          </div>\r\n          <span class=\"item_title\">總金額:{{ order.totalamount }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2';\r\nimport Navbar from '../components/NavBar.vue';\r\nexport default {\r\n  name: 'HomeView',\r\n  components: {\r\n    Navbar,\r\n  },\r\n  data() {\r\n    return {\r\n      username: ' ',\r\n      email: '',\r\n      address: '',\r\n      cellphone: '',\r\n      activeTab: 'User',\r\n      cartTotal: 0,\r\n      activeOrder: 0,\r\n      orderdata: this.orderdata,\r\n      imagelist: [],\r\n      namelist: [],\r\n      pricelist: [],\r\n      quantitylist: [],\r\n      ispay: false,\r\n    };\r\n  },\r\n  methods: {\r\n    toggleOrder(index) {\r\n      if (this.activeOrder === index) {\r\n        this.activeOrder = null;\r\n      } else {\r\n        this.activeOrder = index;\r\n      }\r\n    },\r\n    async getOrder() {\r\n      console.log('http://localhost:3000/api/admin/order/');\r\n      const res = await axios.get(\r\n        `http://localhost:3000/api/admin/order/${localStorage.id}`\r\n      );\r\n      this.orderdata = res.data.data;\r\n      console.log(this.orderdata);\r\n      console.log(this.orderdata);\r\n      console.log(this.orderdata);\r\n      this.imagelist = this.orderdata.map((item, index) =>\r\n        item.image.split(',')\r\n      );\r\n      this.namelist = this.orderdata.map((item, index) =>\r\n        item.productname.split(',')\r\n      );\r\n      this.pricelist = this.orderdata.map((item, index) =>\r\n        item.itemprice.split(',')\r\n      );\r\n      this.quantitylist = this.orderdata.map((item, index) =>\r\n        item.quantity_array.split(',')\r\n      );\r\n      console.log(this.orderdata);\r\n      console.log('imagelist:', this.imagelist);\r\n      console.log(' namelist:', this.namelist);\r\n      this.$emit('cartTotal', this.orderdata);\r\n    },\r\n    async getCart() {\r\n      console.log(localStorage.email);\r\n      console.log(localStorage);\r\n      try {\r\n        const response = await axios.get(\r\n          `http://localhost:3000/api/admin/userCart/${localStorage.email}`,\r\n          {\r\n            headers: { Authorization: `Bearer ${localStorage.token}` },\r\n          }\r\n        );\r\n\r\n        const responseData = response.data;\r\n\r\n        this.cartProduct = responseData;\r\n        localStorage.cart = responseData.length;\r\n        this.updateCartTotal(this.cartTotal);\r\n        this.cartTotal = response.data.length;\r\n        this.cartTotal = response.data.reduce((total, item) => {\r\n          return total + item.quantity;\r\n        }, 0);\r\n      } catch (error) {\r\n        console.error('Login error:', error);\r\n\r\n        // this.$router.push('/login');\r\n      }\r\n    },\r\n    logout() {\r\n      localStorage.clear();\r\n      console.log(localStorage);\r\n      this.$router.push('/login');\r\n      Swal.fire({\r\n        title: '已登出',\r\n        icon: 'success',\r\n        timer: 2000, // 设置2秒的显示时间\r\n        timerProgressBar: true, // 显示倒计时进度条\r\n      });\r\n    },\r\n\r\n    updateCartTotal(newTotal) {\r\n      this.cartTotal = newTotal; // 更新 cartTotal\r\n    },\r\n    async getUserInfo() {\r\n      try {\r\n        const response = await axios.get(\r\n          'http://localhost:3000/api/admin/login',\r\n          {\r\n            headers: { Authorization: `Bearer ${localStorage.token}` },\r\n          }\r\n        );\r\n        const responseData = response.data.data;\r\n        console.log(responseData);\r\n        this.username = responseData.user;\r\n        this.email = responseData.email;\r\n        this.address = responseData.address;\r\n        this.cellphone = responseData.cellphone;\r\n        // localStorage.email = responseData.email;\r\n      } catch (error) {\r\n        console.error('Login error:', error);\r\n        this.$router.push('/login');\r\n      }\r\n    },\r\n  },\r\n  async getOrder() {\r\n    console.log(this.orderdata);\r\n    this.imagelist = this.orderdata.map((item, index) => item.image.split(','));\r\n    this.namelist = this.orderdata.map((item, index) =>\r\n      item.productname.split(',')\r\n    );\r\n    this.pricelist = this.orderdata.map((item, index) =>\r\n      item.itemprice.split(',')\r\n    );\r\n    this.quantitylist = this.orderdata.map((item, index) =>\r\n      item.quantity_array.split(',')\r\n    );\r\n    console.error(this.orderdata[0]);\r\n    this.ispay = this.orderdata.ispay;\r\n    console.log(this.orderdata);\r\n    console.log('imagelist:', this.imagelist);\r\n    console.log(' namelist:', this.namelist);\r\n    this.$emit('cartTotal', this.orderdata);\r\n  },\r\n  async getCart() {\r\n    try {\r\n      const response = await axios.get(\r\n        `http://192.168.68.112:3000/api/admin/userCart/${localStorage.email}`,\r\n        {\r\n          headers: { Authorization: `Bearer ${localStorage.token}` },\r\n        }\r\n      );\r\n\r\n      const responseData = response.data;\r\n\r\n      this.cartProduct = responseData;\r\n\r\n      this.cartTotal = response.data.reduce((total, item) => {\r\n        return total + item.quantity;\r\n      }, 0);\r\n      localStorage.cart = this.cartTotal;\r\n      // this.username = responseData.user;\r\n      // this.email = responseData.email;\r\n      // this.address = responseData.address;\r\n      // this.cellphone = responseData.cellphone;\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      this.showlogin();\r\n      this.$router.push('/login');\r\n      // this.$router.push('/login');\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getUserInfo();\r\n    this.getCart();\r\n    this.getOrder();\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style>\r\n.editusercontent {\r\n  margin-top: 100px;\r\n}\r\nh2 {\r\n  text-align: center;\r\n}\r\n\r\n.data-imgitem {\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n.order-img {\r\n}\r\n.item_title {\r\n  font-size: 1.25rem;\r\n}\r\n.vertical-text {\r\n  margin: 3px;\r\n  font-size: 1.25rem;\r\n  letter-spacing: 1cm;\r\n}\r\n.data-imgitem > img {\r\n  height: 70%;\r\n  width: 100%;\r\n\r\n  padding: 3px;\r\n}\r\n.data-imgitem > i {\r\n  width: 200px;\r\n  height: 200px;\r\n}\r\n.collapse_button {\r\n  margin-top: 3px;\r\n  margin-bottom: 3px;\r\n\r\n  border-bottom: 0.5px solid #c3c3c3;\r\n\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.button-text {\r\n  line-height: 1.5; /* 控制文字垂直居中对齐 */\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.arrow-icon {\r\n  margin-left: 10px; /* 调整箭头和按钮文本之间的距离 */\r\n}\r\n\r\nh3 {\r\n  margin: 40px 0 0;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: inline-block;\r\n  margin: 0 10px;\r\n}\r\na {\r\n  color: #42b983;\r\n}\r\n.tab-item {\r\n  color: black;\r\n  text-decoration: none;\r\n}\r\n.editusercontent {\r\n  height: 600px;\r\n  overflow: scroll;\r\n}\r\n.editusercontent::-webkit-scrollbar {\r\n  width: 0.5em;\r\n}\r\n.tabs {\r\n  position: sticky;\r\n  top: 0;\r\n}\r\n</style>\r\n","import { render } from \"./MyOrderView.vue?vue&type=template&id=189bb8a0\"\nimport script from \"./MyOrderView.vue?vue&type=script&lang=js\"\nexport * from \"./MyOrderView.vue?vue&type=script&lang=js\"\n\nimport \"./MyOrderView.vue?vue&type=style&index=0&id=189bb8a0&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","href","_createVNode","_component_Navbar","cartTotal","$data","_hoisted_1","_hoisted_2","_hoisted_3","_createElementBlock","_Fragment","_renderList","orderdata","order","index","key","onClick","$event","$options","toggleOrder","_hoisted_5","_toDisplayString","orderid","_normalizeClass","activeOrder","_hoisted_6","_hoisted_7","_hoisted_8","ispay","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","imagelist","img","imageIndex","_hoisted_13","src","alt","namelist","_hoisted_15","quantitylist","_hoisted_16","pricelist","_hoisted_17","totalamount","name","components","Navbar","data","username","email","address","cellphone","activeTab","this","methods","getOrder","console","log","res","axios","get","localStorage","id","map","item","image","split","productname","itemprice","quantity_array","$emit","getCart","response","headers","Authorization","token","responseData","cartProduct","cart","length","updateCartTotal","reduce","total","quantity","error","logout","clear","$router","push","Swal","title","icon","timer","timerProgressBar","newTotal","getUserInfo","user","showlogin","created","__exports__","render"],"sourceRoot":""}